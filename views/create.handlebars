<div id="bubble">
    <a href="/events">
        <img src="/images/header.gif" id="header-logo">
    </a>
    <hgroup class="speech-bubble" style="text-align:center;">
        <h1>WHAT'S<br>HAPPENIN' TN?</h1>
    </hgroup>
    <hgroup class="speech-bubble-2" style="text-align:center;">
        <h1><a href="/events" id="home">#KEEPITLOCAL</a></h1>
    </hgroup>

</div>


<div id="dark-panel">
    <div class="create">
        <form id="create-form">
            <input type="text" name="eventName" placeholder="name"><br>
            <input type="date" name="eventDate" placeholder="08/08/2019"><br>
            <input type="time" name="startTime" placeholder="3PM"><br>
            <input type="time" name="endTime" placeholder="10PM"><br>
            <input id="location" type="text" name="location" placeholder="444 Address Drive"> <input id="city"
                name="city" placeholder="City"><br>

            <div id="location-form" class="input-field col s12"></div>
            {{!-- <input type="text" name="password" placeholder="event details..."><br> --}}
            <textarea placeholder="Event detals..."></textarea>
            <button type="submit" id="create-btn">create event</button>
        </form>
    </div>
</div>




<footer class="footer">
    KEEP IT LOCALÂ®
</footer>

<script>
    $(document).ready(function () {
 
        


        


        $(".event-link").click(function () {
            let event_id = $(this).attr("data-id").val()
            $.ajax(`/${event_id}`, {
                method: "GET",
                data: {
                    id: event_id
                }
            }).then(function (result) {
                window.location.replace(result)
                // window.location = `/event/${id}`
            })
            function expandTextarea(id) {
                document.getElementById(id).addEventListener('keyup', function () {
                    this.style.overflow = 'hidden';
                    this.style.height = 0;
                    this.style.height = this.scrollHeight + 'px';
                }, false);
            }
            expandTextarea('txtarea');
        });


        //list used to populate state selector
        let stateAbrev = ["AK", "AL", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY"];
        let trigger = $("<select>").attr("id", "stateVal").append($('<option value="" disabled selected>State</option>'));
        for (var i = 0; i < stateAbrev.length; i++) {
            var item = $("<option>").attr("value", i).text(stateAbrev[i]);
            trigger.append(item);
        }
        $("#location-form").append(trigger);
        //initializes state selector trigger
        $('select').formSelect();
        $(document).on("click", ".dropdown-trigger", function () {
            let stateIndex = $("#stateVal").val();
            let stateName = stateAbrev[stateIndex];
            console.log(stateName);
        });
    });
</script>