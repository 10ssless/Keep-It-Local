<div id="bubble">
    <hgroup class="speech-bubble" style="text-align:center;">
        <h1>WHAT'S<br>HAPPENIN'</h1>
    </hgroup>
</div>


<div id="dark-panel">
    <br><br><br><br><br><br><br><br><br><br>
    <div id="quote">
        <h1 style="color: white;">Find out about<br> events near you.</h1>
    </div>
    <br><br><br><br><br><br><br><br><br><br>
    
    <div class="login">
        <form id="login-form">
            <label>welcome back,</label><br>
            <input type="text" name="username" placeholder="username">
            <input type="password" name="password" placeholder="password">
            <button type="submit" id="login-btn">login</button>
            
        <span class="switch-link">not a member? <a href="/signup">sign up</a></span>
        </form>
    </div>

</div>




<footer class="footer">
    <p>KEEP IT LOCAL Â©</p>
</footer>


<script type="text/javascript">
    $(document).ready(function () {
        let usernameInput = $("#login-form [name=username]");
        let passwordInput = $("#login-form [name=password]");
        console.log(usernameInput.val());
        $("#login-form").on("submit", function (event) {
            event.preventDefault();
            let userData = {
                username: usernameInput.val().trim(),
                password: passwordInput.val().trim()
            }
            console.log(usernameInput.name);

            loginUser(userData.username, userData.password);

            usernameInput.val("");
            passwordInput.val("");

            });

            // loginUser does a post to our "api/login" route and if successful, redirects us the the members page
            function loginUser(username, password) {
                $.post("/api/login", {
                    username: username,
                    password: password
                }).then(function (data) {
                    //window.location.replace(data);
                    // If there's an error, log the error
                    window.location = "http://localhost:8080/events";
                }).catch(function (err) {
                    console.log(err);
                });
            }
    });

</script>